<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id='tareas_invoice_form_view' model='ir.ui.view'>
            <field name='name'>acta.form</field>
            <field name='model'>account.invoice</field>          
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name='type'>form</field>
            <field name='arch' type="xml">
                <xpath expr="//page[@name='other_info']" position="after">
                    <page string="Tareas" groups="base.group_user">
                        <field name="tarea_ids" readonly="True"/>
                    </page>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']//tree" position="attributes">
                        <attribute name="editable"/>
                </xpath>

                <xpath expr="//field[@name='invoice_line_ids']//tree" position="after">
                        <form>
                            <group>
                                <field name="product_id"/>
                                <field name="origin" invisible="1"/>
                                <field name="name"/>
                                <field name="company_id" invisible="1"/>
                                <field name="fecha_estimada"/>
                                <field name="tipo_servicio" invisible="1"/>
                                <field name="user_id"/>
                                <field name="tipo_certificado_id"
                                    attrs="{

                                        'invisible':['|', ('tipo_servicio','not in',('certificacion_propiedad','certificacion_mercantil'))],
                                        'required':['|', ('tipo_servicio','in',('certificacion_propiedad','certificacion_mercantil'))],

                                        }" 
                                        domain="[('tipo_certificado', '=', tipo_servicio)]"
                                        />

                                <field name="persona_id" 
                                    attrs="{

                                        'invisible':['|', ('tipo_servicio','!=','certificacion_propiedad')],
                                        'required':['|', ('tipo_servicio','=','certificacion_propiedad')]

                                        }" />
                                <field name="bien_id"  attrs="{'invisible':['|', ('tipo_servicio','!=','certificacion_propiedad')]}" />

                        
                                <field name="account_id" groups="account.group_account_user" domain="[('company_id', '=', parent.company_id), ('internal_type', '=', 'other')]"/>
                                <field name="account_analytic_id" groups="analytic.group_analytic_accounting" domain="[('company_id', '=', parent.company_id)]"/>
                                <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags"/>
                                <field name="quantity" readonly ="1"/>
                                <field name="uom_id" groups="product.group_uom"/>
                                <field name="price_unit"/>
                                <!-- <field name="discount" groups="base.group_no_one"/> -->
                                <field name="invoice_line_tax_ids" widget="many2many_tags" context="{'type':parent.type}" domain="[('type_tax_use','=','sale'),('company_id', '=', parent.company_id)]" options="{'no_create': True}"/>
                                <field name="price_subtotal"/>
                                <field name="currency_id" invisible="1"/>
                            </group>
                        </form>
                </xpath>

                <xpath expr="//field[@name='invoice_line_ids']//tree//field[@name='product_id']" position="after">
                    
                        <field name="fecha_estimada"/>
                        <field name="tipo_servicio" invisible="1"/>
                        <field name="user_id"/>
                </xpath>
                <xpath expr="//field[@name='invoice_line_ids']//tree//field[@name='quantity']" position="replace">
                    
                        <field name="quantity" readonly ="1"/>
                </xpath>
                <xpath expr="//field[@name='payment_term_id']" position="replace"/>

                <xpath expr="//field[@name='invoice_line_ids']//tree//field[@name='discount']" position="replace">
                    
                        <field name="discount" invisible="1"/>
                </xpath>
            </field>
        </record>


        <record id='view_partner_form_inherit' model='ir.ui.view'>
            <field name='name'>res.partner.form</field>
            <field name='model'>res.partner</field>          
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name='type'>form</field>
            <field name='arch' type="xml">
 
                <xpath expr="//field[@name='state_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='zip']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='category_id']" position="replace"/>
                <xpath expr="//field[@name='website']" position="replace"/>
                <xpath expr="//field[@name='lang']" position="replace"/>
                <xpath expr="//field[@name='title']" position="replace"/>
                <xpath expr="//field[@name='fax']" position="replace"/>


            <!--     <xpath expr="//page[@autofocus='autofocus']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//page[@name='internal_notes']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//page[@name='sales_purchases']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath> -->
                <xpath expr="//notebook" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

            </field>
        </record>

    </data>
</openerp>
